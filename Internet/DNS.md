## DNS
域名系统(Domain Name System)能进行**主机名到IP地址转换**的目录服务。
* DNS：
1. **一个由分层的 DNS 服务器实现的分布式数据库**
2. **一个使得主机能够查询分布式数据的应用层协议**

DNS 协议运行在 UDP 之上，使用53端口号。
> DNS 可以使用 UDP 或者 TCP 进行传输，使用的端口号都为 53。大多数情况下 DNS 使用 UDP 进行传输，这就要求
> 域名解析器和域名服务器都必须自己处理超时和重传从而保证可靠性。在两种情况下会使用 TCP 进行传输：
> 如果返回的响应超过的 512 字节（UDP 最大只支持 512 字节的数据）。
> 区域传送（区域传送是主域名服务器向辅助域名服务器传送变化的那部分数据）。


1. 主机向本地域名服务器的查询一般都是采用**递归查询**。        

所谓递归查询就是：如果主机所询问的本地域名服务器不知道被查询的域名的IP地址，那么本地域名服务器就以DNS客户的身份，向其它根域名服务器继续发出查询请求报文(即替主机继续查询)，而不是让主机自己进行下一步查询。因此，递归查询返回的查询结果或者是所要查询的IP地址，或者是报错，表示无法查询到所需的IP地址。

2. 本地域名服务器向根域名服务器的查询的**迭代查询**       
    迭代查询的特点：当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么给出所要查询的IP地址，要么告诉本地服务器：“你下一步应当向哪一个域名服务器进行查询”。然后让本地服务器进行后续的查询。
    
    搜索浏览器DNS缓存 --> 操作系统DNS缓存 --> 向本地DNS服务器发起DNS请求

本地DNS服务器 --> 根DNS服务器 --> 根DNS服务器向本地DNS服务器响应：你去找哪个哪个顶级域DNS服务器 --> 顶级域DNS服务器：你去找哪个哪个权威DNS服务器



* 除了进行主机名到IP地址的转换之外，DNS还提供了一些重要的服务：
1. 主机别名 2. 邮件服务器别名 3. 负载分配

# DNS工作机理
* 分布式、层次数据库
大致来说，有三种类型的 DNS 服务器：
    1. 根 DNS 服务器
    2. 顶级域(Top-Level Domain, TLD)DNS服务器(com. org. net. edu. fr. ca. jp)
    3. 权威 DNS 服务器。

**本地DNS服务器**并不属于该服务器的层级结构，但它对DNS层次结构是至关重要的。每个ISP都有一台本地DNS服务器。

* DNS 缓存
在一个请求链中，当某 DNS 服务器接受一个 DNS 回答时，它能将映射换存在本地存储器中。